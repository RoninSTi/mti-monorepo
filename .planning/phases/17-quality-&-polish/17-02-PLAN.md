---
phase: 17-quality-and-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/layout/AppLayout.tsx
  - frontend/src/components/layout/Sidebar.tsx
  - frontend/src/pages/FactoriesPage.tsx
  - frontend/src/pages/GatewaysPage.tsx
autonomous: true

must_haves:
  truths:
    - "Application works at 1920x1080 desktop without layout issues"
    - "Application works at 768x1024 tablet without horizontal scroll"
    - "Tables display all essential columns on desktop; less critical columns hide on tablet"
    - "Sidebar is visible on desktop and collapsible or hidden on tablet"
    - "Dialogs fit within the viewport at 768px width"
  artifacts:
    - path: "frontend/src/components/layout/AppLayout.tsx"
      provides: "Responsive layout with sidebar visibility toggle for tablet"
    - path: "frontend/src/components/layout/Sidebar.tsx"
      provides: "Sidebar that hides on small screens"
    - path: "frontend/src/pages/FactoriesPage.tsx"
      provides: "Responsive factory table and page header"
    - path: "frontend/src/pages/GatewaysPage.tsx"
      provides: "Responsive gateway table with hidden columns on tablet"
  key_links:
    - from: "frontend/src/components/layout/AppLayout.tsx"
      to: "frontend/src/components/layout/Sidebar.tsx"
      via: "Responsive visibility classes"
      pattern: "hidden md:block|md:flex"
---

<objective>
Make the application responsive for desktop (1920x1080) and tablet (768x1024) viewports.

Purpose: Satisfy QUAL-UI-04 (responsive design). The current UI uses fixed widths (sidebar: w-64) and wide tables (8 columns on GatewaysPage) that will overflow on tablet. Apply Tailwind responsive utilities to ensure no horizontal scroll at 768px width.
Output: Layout, sidebar, tables, dialogs, and page headers work at both desktop and tablet breakpoints.
</objective>

<execution_context>
@/Users/craigcronin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/craigcronin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-quality-&-polish/17-RESEARCH.md
@frontend/src/components/layout/AppLayout.tsx
@frontend/src/components/layout/Sidebar.tsx
@frontend/src/pages/FactoriesPage.tsx
@frontend/src/pages/GatewaysPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Make layout and sidebar responsive</name>
  <files>frontend/src/components/layout/AppLayout.tsx, frontend/src/components/layout/Sidebar.tsx</files>
  <action>
The sidebar is currently `w-64` (256px) always visible. At 768px tablet width, this leaves only 512px for content -- too narrow for tables. Make the sidebar responsive:

**Sidebar.tsx changes:**
1. Add `hidden md:flex` to the `<aside>` element so it hides below 768px (md breakpoint). Keep the existing `w-64 border-r bg-background` classes.
2. The result: sidebar is visible on md+ (768px and up), hidden on smaller screens.

**AppLayout.tsx changes:**
1. Add a mobile header bar that shows only below md breakpoint. This gives tablet/mobile users navigation access:
   ```tsx
   <div className="md:hidden flex items-center justify-between border-b px-4 h-14">
     <h1 className="text-lg font-bold">MTI WiFi</h1>
     <nav className="flex items-center gap-4">
       <NavLink to="/factories" className={...}>Factories</NavLink>
       <NavLink to="/gateways" className={...}>Gateways</NavLink>
     </nav>
   </div>
   ```
   Import NavLink from react-router-dom and cn from @/lib/utils. Use the same active/inactive styling approach as Sidebar but simplified for horizontal layout:
   - Active: `text-sm font-medium text-foreground`
   - Inactive: `text-sm text-muted-foreground`

2. Change the outer container from `flex h-screen` to `flex flex-col md:flex-row h-screen`. This stacks the mobile header above content on small screens, and goes side-by-side on desktop.

3. Adjust main content padding: change `<div className="p-6">` to `<div className="p-4 md:p-6">` for slightly less padding on tablet.

Keep it simple -- no hamburger menu, no sliding drawer. Just a compact horizontal nav bar below md and the existing sidebar at md+. This is sufficient for tablet (768px) where the horizontal nav gives enough space.
  </action>
  <verify>
    - `npm run build` passes
    - At 768px width: sidebar is hidden, horizontal nav shows Factories and Gateways links
    - At 1920px width: sidebar is visible on the left, no mobile header
    - NavLink active states work in mobile header
  </verify>
  <done>
    - Sidebar hidden below 768px (md breakpoint)
    - Mobile horizontal nav bar visible below 768px with Factories and Gateways links
    - Content area gets full width on tablet
    - No horizontal scroll at 768px
  </done>
</task>

<task type="auto">
  <name>Task 2: Make pages and tables responsive</name>
  <files>frontend/src/pages/FactoriesPage.tsx, frontend/src/pages/GatewaysPage.tsx</files>
  <action>
Make page content responsive for 768px tablet width.

**Page headers (both pages):**
1. Change `<div className="flex items-center justify-between">` to stack on small screens:
   `<div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">`
   This stacks title and button vertically on very small screens but side-by-side from 640px+.

2. Page title: Change `text-3xl` to `text-2xl md:text-3xl` for slightly smaller title on tablet.

**FactoriesPage table (5 columns: Name, Location, Timezone, Created, Actions):**
1. Wrap the Table in `<div className="overflow-x-auto">` to allow horizontal scroll as a fallback.
2. Hide "Created" column on screens below md:
   - TableHead: `<TableHead className="hidden md:table-cell">Created</TableHead>`
   - TableCell: `<TableCell className="hidden md:table-cell">{...date...}</TableCell>`
3. The remaining 4 columns (Name, Location, Timezone, Actions) fit comfortably at 768px.

**GatewaysPage table (8 columns: Factory, Gateway ID, Name, URL, Email, Model, Firmware, Actions):**
8 columns is too many for 768px. Hide less critical columns on tablet:
1. Wrap the Table in `<div className="overflow-x-auto">` as fallback.
2. Hide these columns below md (768px):
   - "Email" column: `className="hidden md:table-cell"`
   - "Model" column: `className="hidden lg:table-cell"` (hide below 1024px)
   - "Firmware" column: `className="hidden lg:table-cell"` (hide below 1024px)
3. Apply same hidden classes to both TableHead and TableCell for each hidden column.
4. This leaves 5 visible columns on tablet (Factory, Gateway ID, Name, URL, Actions) which fits at 768px.
5. Update the empty state colSpan: On tablet, fewer columns are visible but colSpan still needs to span the full table. Keep `colSpan={8}` -- the browser handles this correctly even when some columns are hidden via CSS.

**GatewaysPage filter bar:**
1. Change the filter select width from `w-[200px]` to `w-full sm:w-[200px]` so it takes full width on very small screens but 200px on 640px+.
2. Wrap the filter bar to stack on small screens: `<div className="flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-4">`.

**Dialog content (both pages):**
The shadcn Dialog component uses `sm:max-w-lg` by default, which already constrains width appropriately. No changes needed for dialogs.

After all changes, run `npm run build` to verify zero TypeScript errors.
  </action>
  <verify>
    - `npm run build` passes with zero errors
    - At 768px: FactoriesPage shows 4 columns (Name, Location, Timezone, Actions) -- Created is hidden
    - At 768px: GatewaysPage shows 5 columns (Factory, Gateway ID, Name, URL, Actions) -- Email, Model, Firmware hidden
    - At 1024px: GatewaysPage shows 6 columns (adds Email) -- Model, Firmware still hidden
    - At 1920px: All columns visible on both pages
    - Tables have overflow-x-auto wrapper
    - Page headers stack vertically on small screens
  </verify>
  <done>
    - Tables wrapped in overflow-x-auto for horizontal scroll fallback
    - Less critical columns hidden at appropriate breakpoints
    - Page headers responsive (stack vertically on mobile, horizontal on desktop)
    - Gateway filter bar responsive (full width on mobile, inline on desktop)
    - No horizontal scroll at 768x1024 tablet viewport
    - QUAL-UI-04 (responsive design) satisfied
  </done>
</task>

</tasks>

<verification>
1. `npm run build` -- zero errors after all changes
2. Browser DevTools responsive mode at 768x1024 (tablet portrait): no horizontal scroll, sidebar hidden, compact nav visible, tables show essential columns
3. Browser at 1920x1080 (desktop): full layout with sidebar, all table columns visible
4. Navigation works on both viewports (clicking Factories/Gateways loads correct page)
</verification>

<success_criteria>
- QUAL-UI-04: Application works on desktop (1920x1080) and tablet (768x1024) without horizontal scroll
- Sidebar visible on desktop, hidden on tablet with horizontal nav alternative
- Table columns intelligently hidden at smaller breakpoints
- All interactive elements remain accessible at both viewport sizes
</success_criteria>

<output>
After completion, create `.planning/phases/17-quality-&-polish/17-02-SUMMARY.md`
</output>
