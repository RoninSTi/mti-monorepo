---
phase: 12-frontend-foundation
plan: 02
type: execute
wave: 2
depends_on: ["12-01"]
files_modified:
  - frontend/components.json
  - frontend/src/lib/utils.ts
  - frontend/src/components/ui/button.tsx
  - frontend/src/index.css
  - frontend/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "shadcn/ui Button component renders with correct styles when imported from @/components/ui/button"
    - "CSS theme variables define primary, background, foreground, and border colors"
    - "Tailwind classes using theme colors (e.g., bg-primary, text-foreground) render correctly"
  artifacts:
    - path: "frontend/components.json"
      provides: "shadcn/ui configuration"
      contains: "aliases"
    - path: "frontend/src/lib/utils.ts"
      provides: "cn() utility for class merging"
      contains: "twMerge"
    - path: "frontend/src/components/ui/button.tsx"
      provides: "shadcn/ui Button component with variants"
      contains: "buttonVariants"
    - path: "frontend/src/index.css"
      provides: "Theme CSS variables via Tailwind @theme directive"
      contains: "--color-primary"
  key_links:
    - from: "frontend/src/components/ui/button.tsx"
      to: "frontend/src/lib/utils.ts"
      via: "cn() import for class merging"
      pattern: "import.*cn.*from.*@/lib/utils"
    - from: "frontend/src/App.tsx"
      to: "frontend/src/components/ui/button.tsx"
      via: "Button import to verify integration"
      pattern: "import.*Button.*from.*@/components/ui/button"
---

<objective>
Initialize shadcn/ui component library and establish theming infrastructure with CSS variables.

Purpose: Provides the UI component foundation (Button as proof-of-concept) and CSS variable theming that all future UI phases will build on.
Output: Working shadcn/ui Button component importable via @/components/ui/button, plus CSS theme variables for consistent design tokens.
</objective>

<execution_context>
@/Users/craigcronin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/craigcronin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-frontend-foundation/12-RESEARCH.md
@.planning/phases/12-frontend-foundation/12-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize shadcn/ui and add Button component</name>
  <files>
    frontend/components.json
    frontend/src/lib/utils.ts
    frontend/src/components/ui/button.tsx
  </files>
  <action>
    1. From the frontend directory, install shadcn/ui dependencies that it needs:
       ```bash
       cd frontend
       npm install clsx tailwind-merge class-variance-authority lucide-react
       ```

    2. Initialize shadcn/ui using the CLI. The CLI will create `components.json` and `src/lib/utils.ts`:
       ```bash
       npx shadcn@latest init -y
       ```
       If the CLI prompts interactively, select:
       - Style: New York
       - Base color: Neutral
       - CSS variables: Yes
       - Path alias: @/

       If the CLI modifies index.css or tailwind config in unexpected ways, restore the Tailwind v4 `@import "tailwindcss"` line and theme variables.

    3. Add the Button component:
       ```bash
       npx shadcn@latest add button -y
       ```
       This creates `src/components/ui/button.tsx` with variant support (default, destructive, outline, secondary, ghost, link).

    4. Verify `src/lib/utils.ts` exists with the cn() helper. If shadcn CLI did not create it, create manually:
       ```typescript
       import { clsx, type ClassValue } from 'clsx'
       import { twMerge } from 'tailwind-merge'

       export function cn(...inputs: ClassValue[]) {
         return twMerge(clsx(inputs))
       }
       ```

    5. Verify the Button component file exists and imports cn from @/lib/utils. The file should export Button and buttonVariants.
  </action>
  <verify>
    ```bash
    test -f frontend/components.json && echo "PASS: components.json exists"
    test -f frontend/src/lib/utils.ts && echo "PASS: utils.ts exists"
    test -f frontend/src/components/ui/button.tsx && echo "PASS: button.tsx exists"
    grep -q "cn" frontend/src/lib/utils.ts && echo "PASS: cn() helper defined"
    grep -q "buttonVariants" frontend/src/components/ui/button.tsx && echo "PASS: Button has variants"
    ```
  </verify>
  <done>
    - components.json configures shadcn/ui with @/ alias
    - src/lib/utils.ts exports cn() class merging utility
    - src/components/ui/button.tsx exports Button with variant support
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure CSS theme variables and verify integration</name>
  <files>
    frontend/src/index.css
    frontend/src/App.tsx
  </files>
  <action>
    1. Update `src/index.css` to include Tailwind import AND theme CSS variables. The file should contain:
       ```css
       @import "tailwindcss";

       @theme {
         /* Primary - Blue tone for actions and interactive elements */
         --color-primary: oklch(0.55 0.2 250);
         --color-primary-foreground: oklch(0.98 0.01 250);

         /* Background and foreground */
         --color-background: oklch(0.985 0 0);
         --color-foreground: oklch(0.145 0 0);

         /* Muted - Subtle backgrounds */
         --color-muted: oklch(0.94 0 0);
         --color-muted-foreground: oklch(0.45 0 0);

         /* Card surfaces */
         --color-card: oklch(1 0 0);
         --color-card-foreground: oklch(0.145 0 0);

         /* Border and input */
         --color-border: oklch(0.87 0 0);
         --color-input: oklch(0.87 0 0);

         /* Destructive - Red for delete/error actions */
         --color-destructive: oklch(0.55 0.22 25);
         --color-destructive-foreground: oklch(0.98 0.01 25);

         /* Ring - Focus outlines */
         --color-ring: oklch(0.55 0.2 250);

         /* Radius */
         --radius: 0.5rem;
       }

       /* Base styles */
       body {
         background-color: var(--color-background);
         color: var(--color-foreground);
         font-family: system-ui, -apple-system, sans-serif;
       }
       ```

       IMPORTANT: If shadcn/ui init added its own CSS variables or layers to index.css, merge them with the above. Keep the `@import "tailwindcss"` line at the top. Remove any duplicate or conflicting variable definitions. The above theme values take precedence.

    2. Update `src/App.tsx` to demonstrate shadcn/ui Button and theme colors:
       ```tsx
       import { Button } from '@/components/ui/button'

       function App() {
         return (
           <div className="min-h-screen bg-background flex items-center justify-center">
             <div className="text-center space-y-6">
               <h1 className="text-3xl font-bold text-foreground">
                 MTI WiFi Monitor
               </h1>
               <p className="text-muted-foreground">
                 Factory & Gateway Management
               </p>
               <div className="flex gap-3 justify-center">
                 <Button>Default</Button>
                 <Button variant="outline">Outline</Button>
                 <Button variant="destructive">Destructive</Button>
               </div>
             </div>
           </div>
         )
       }

       export default App
       ```

    3. Verify the build still succeeds:
       ```bash
       cd frontend && npm run build
       ```
  </action>
  <verify>
    ```bash
    cd frontend && npm run build
    grep -q "\-\-color-primary" frontend/src/index.css && echo "PASS: Theme variables defined"
    grep -q "import.*Button.*from.*@/components/ui/button" frontend/src/App.tsx && echo "PASS: Button imported in App"
    grep -q "bg-background" frontend/src/App.tsx && echo "PASS: Theme classes used"
    ```
  </verify>
  <done>
    - index.css defines theme CSS variables (primary, background, foreground, muted, card, border, destructive, ring, radius)
    - App.tsx imports and renders shadcn/ui Button with multiple variants
    - App.tsx uses theme color classes (bg-background, text-foreground, text-muted-foreground)
    - Build completes with zero errors
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run build` exits with code 0
2. `frontend/components.json` exists and contains alias configuration
3. `frontend/src/components/ui/button.tsx` exists with buttonVariants export
4. `frontend/src/lib/utils.ts` exports cn() helper
5. `frontend/src/index.css` contains --color-primary CSS variable
6. `frontend/src/App.tsx` imports Button from @/components/ui/button
</verification>

<success_criteria>
- SETUP-03 satisfied: shadcn/ui components installed and accessible (Button renders correctly)
- SETUP-07 satisfied: Theming infrastructure with CSS variables for colors (supports future theme switching)
- shadcn/ui CLI initialized, Button component available
- CSS theme variables define complete color palette using oklch values
- App.tsx demonstrates working Button + theme integration
</success_criteria>

<output>
After completion, create `.planning/phases/12-frontend-foundation/12-02-SUMMARY.md`
</output>
